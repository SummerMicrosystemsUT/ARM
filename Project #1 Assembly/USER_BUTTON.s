#include <ST/iostm32f207zx.h>

	NAME USER_BUTTON
	        
	PUBLIC USER_BUTTON_INIT
        
        SECTION .USER_BUTTON : CODE (2)
        THUMB
	
	;USER BUTTON IS ON GPIOG PORT.
	
USER_BUTTON_INIT
	;ENABLE PERIPHERAL CLOCK THAT HANDLES GPIOG PORT
	LDR	R0, =RCC_AHB1ENR
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<6)
	STR	R1, [R0]
	
	;TURN ON USER BUTTON
	LDR	R0, =GPIOG_MODER
	LDR	R1, [R0]
	BIC	R1, R1, #(3<<12)
	STR	R1, [R0]
	
	BX LR
	
	END