#include <ST/iostm32f207zx.h>

	NAME LED
	        
	PUBLIC LED_INIT
	
	PUBLIC ENABLE_LED_1
	PUBLIC ENABLE_LED_2
	PUBLIC ENABLE_LED_3
	PUBLIC ENABLE_LED_4
	PUBLIC ENABLE_LED_ALL
	
	PUBLIC TURN_ON_LED_1
	PUBLIC TURN_ON_LED_2
	PUBLIC TURN_ON_LED_3
	PUBLIC TURN_ON_LED_4
	PUBLIC TURN_ON_LED_ALL
	
	PUBLIC TURN_OFF_LED_1
	PUBLIC TURN_OFF_LED_2
	PUBLIC TURN_OFF_LED_3
	PUBLIC TURN_OFF_LED_4
	PUBLIC TURN_OFF_LED_ALL
	
        SECTION .LED : CODE (2)
        THUMB
	
LED_INIT	
	;ENABLE GPIOF
	LDR	R0, =RCC_AHB1ENR
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<5)
	STR	R1, [R0]
	
	BX LR

ENABLE_LED_1
	;ENABLE STAT LED 1
	LDR	R0, =GPIOF_MODER
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<12)
	STR	R1, [R0]
	
	BX LR
	
ENABLE_LED_2
	;ENABLE STAT LED 2
	LDR	R0, =GPIOF_MODER
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<14)
	STR	R1, [R0]
	
	BX LR

ENABLE_LED_3
	;ENABLE STAT LED 3
	LDR	R0, =GPIOF_MODER
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<16)
	STR	R1, [R0]
	
	BX LR
		
ENABLE_LED_4
	;ENABLE STAT LED 4
	LDR	R0, =GPIOF_MODER
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<18)
	STR	R1, [R0]
	
	BX LR
	
ENABLE_LED_ALL

	LDR	R0, =GPIOF_MODER
	LDR	R1, [R0]
	ORR	R1, R1, #0x55000 
	STR	R1, [R0]
	
	BX LR
	
TURN_ON_LED_1
	;ENABLE LED1 OUTPUT
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<6)
	STR	R1, [R0]
	
	BX LR
	
TURN_ON_LED_2
	;ENABLE LED2 OUTPUT
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<7)
	STR	R1, [R0]
	
	BX LR

TURN_ON_LED_3
	;ENABLE LED3 OUTPUT
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<8)	
	STR	R1, [R0]
	
	BX LR
	
TURN_ON_LED_4
	;ENABLE LED4 OUTPUT
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(1<<9)
	STR	R1, [R0]
	
	BX LR
	
TURN_ON_LED_ALL
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #0x3C0
	STR	R1, [R0]
	
	BX LR
	
TURN_OFF_LED_1
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(0<<9)
	STR	R1, [R0]
	
	BX LR
		
TURN_OFF_LED_2
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(0<<8)
	STR	R1, [R0]
	
	BX LR
		
TURN_OFF_LED_3
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(0<<7)
	STR	R1, [R0]
	
	BX LR
	
TURN_OFF_LED_4
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	ORR	R1, R1, #(0<<6)
	STR	R1, [R0]
	
	BX LR

TURN_OFF_LED_ALL
	LDR	R0, =GPIOF_ODR
	LDR	R1, [R0]
	BIC	R1, R1, #0x3C0
	STR	R1, [R0]
	
	BX LR
	
	END